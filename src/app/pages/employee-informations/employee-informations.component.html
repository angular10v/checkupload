<div class="card">
  <nb-card-header>Edit Employee</nb-card-header>

  <div class="card-body">
    <form [formGroup]="employeeForm" (ngSubmit)="addEmployee()">

      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">First Name</label>
            <input type="text" nbInput fullWidth formControlName="name" placeholder="Name">
            <div class="form-error" *ngIf="( b.name.dirty || b.name.touched ) && b.name.invalid && b.name.errors">
              Name is Required
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Password</label>
            <input type="password" nbInput fullWidth formControlName="password" placeholder="Password">
            <div class="form-error"
              *ngIf="( b.password.dirty || b.password.touched ) && b.password.invalid && b.password.errors">
              Password is Required
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Description</label>
            <textarea type="text" nbInput fullWidth formControlName="descr" placeholder="Description"></textarea>
            <div class="form-error" *ngIf="( b.descr.dirty || b.descr.touched ) && b.descr.invalid && b.descr.errors">
              Description is Required
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Gross Salary Month</label>
            <input type="text" nbInput fullWidth formControlName="gross_salary_month" placeholder="Gross Salary Month">
            <div class="form-error"
              *ngIf="( b.gross_salary_month.dirty || b.gross_salary_month.touched ) && b.gross_salary_month.invalid && b.gross_salary_month.errors">
              Gross Salary Month is Required
            </div>
          </div>

          <div class="form-group">
            <label class="label">Health Insurance Share</label>
            <input type="number" nbInput fullWidth formControlName="health_insurance_share"
              placeholder="Health Insurance Share">
            <div class="form-error"
              *ngIf="( b.health_insurance_share.dirty || b.health_insurance_share.touched ) && b.health_insurance_share.invalid && b.health_insurance_share.errors">
              Health Insurance Share is Required
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Type</label>
            <input type="text" nbInput fullWidth formControlName="type" placeholder="Type">
            <div class="form-error" *ngIf="( b.type.dirty || b.type.touched ) && b.type.invalid && b.type.errors">
              Type is Required
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Working Contract</label>
            <input type="text" nbInput fullWidth formControlName="working_contract" placeholder="Working Contract">
            <div class="form-error"
              *ngIf="( b.working_contract.dirty || b.working_contract.touched ) && b.working_contract.invalid && b.working_contract.errors">
              Working Contract is Required
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Contract Hours Month</label>
            <input type="number" nbInput fullWidth formControlName="contract_hours_month"
              placeholder="Contract Hours Month">
            <div class="form-error"
              *ngIf="( b.contract_hours_month.dirty || b.contract_hours_month.touched ) && b.contract_hours_month.invalid && b.contract_hours_month.errors">
              Contract Hours Month is Required
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Limit Hours Month</label>
            <input type="text" nbInput fullWidth formControlName="limit_hours_month" placeholder="Limit Hours Month">
            <div class="form-error"
              *ngIf="( b.limit_hours_month.dirty || b.limit_hours_month.touched ) && b.limit_hours_month.invalid && b.limit_hours_month.errors">
              Limit Hours Month is Required
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Ref Id</label>
            <input type="number" nbInput fullWidth formControlName="ref_id" placeholder="Ref Id">
            <div class="form-error"
              *ngIf="( b.ref_id.dirty || b.ref_id.touched ) && b.ref_id.invalid && b.ref_id.errors">
              Ref Id is Required
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">valid</label>
            <input type="number" nbInput fullWidth formControlName="valid" placeholder="valid">
            <div class="form-error" *ngIf="( b.valid.dirty || b.valid.touched ) && b.valid.invalid && b.valid.errors">
              valid is Required
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="form-group">
            <label class="label">Surcharge</label>
            <input type="number" nbInput fullWidth formControlName="surcharge" placeholder="Surcharge">
            <div class="form-error"
              *ngIf="( b.surcharge.dirty || b.surcharge.touched ) && b.surcharge.invalid && b.surcharge.errors">
              Surcharge is Required
            </div>
          </div>
        </div>

      </div>
      <div class="action-button">
        <button type="submit" nbButton>Update</button>
        <button nbButton class="delete-button">Delete</button>
      </div>

    </form>
  </div>
</div> <!-- card.// -->

<nb-card>
  <!--
  <nb-card-header>
    <button *ngIf="stampedIn" type="button" class="btn btn-danger col-12" status="primary"
      (click)="stampOut(employee.password)">Stamp Out</button>
    <button *ngIf="!stampedIn" type="button" class="btn btn-success col-12" status="primary"
      (click)="stampIn(employee.password)">Stamp In</button>

  </nb-card-header>
-->
  <nb-card-body *ngIf="actifTab == 'timeSheetsView'">
    <div class="row">
      <hr />
      <div class="col-12">
        <nb-card size="small">
          <nb-tabset fullWidth>
            <!-- **************** TimeSheets Tab ****************-->
            <nb-tab tabTitle="TimeStamps" active="{{actifTab == 'timeSheetsView'}}">
              <div class="col-12">
                <button type="button" class="btn btn-outline-primary btn-block"
                  (click)="switchViewsTo('timeStampForm')">Add TimeSheet</button>
              </div>
              <nb-list class="user-activity-list">
                <nb-list-item *ngFor="let item of filterTimeSheets('t')">

                  <div class="visited-date">
                    <div class="caption">Start</div>
                    {{ item.from_time | date:'medium' }}
                  </div>

                  <div class="visited-date">
                    <div class="caption">End</div>
                    {{ item.to_time  | date:'medium' }}
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption">Nb Hours</div>
                    <div class="value">{{ item.manual_time  }}</div>
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption"></div>
                    <div class="value">{{ item.note }}</div>
                  </div>
                  <!--
                    <div class="visited-percentages">
                      <div class="caption">New visits, %</div>
                      <div class="delta value" [class.up]="item.deltaUp" [class.down]="!item.deltaUp">
                        <nb-icon [icon]="item.deltaUp ? 'arrow-up' : 'arrow-down'" pack="eva"></nb-icon>
                        {{ item.newVisits }}%
                      </div>
                    </div>
              -->
                </nb-list-item>
              </nb-list>
            </nb-tab>
            <!-- **************** End TimeSheets Tab ****************-->

            <!-- **************** Sick notes Tab ****************-->
            <nb-tab tabTitle="Sick note" active="{{actifTab == 'sickNotesView'}}">
              <div class="col-12">
                <button type="button" class="btn btn-outline-primary btn-block"
                  (click)="switchViewsTo('sickNoteForm')">Add Sick Note</button>
              </div>
              <nb-list class="user-activity-list">
                <nb-list-item *ngFor="let item of filterTimeSheets('s')">

                  <div class="visited-date">
                    <div class="caption">Start</div>
                    {{ item.from_time | date:'medium' }}
                  </div>

                  <div class="visited-date">
                    <div class="caption">End</div>
                    {{ item.to_time  | date:'medium' }}
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption">Nb Hours</div>
                    <div class="value">{{ item.manual_time  }}</div>
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption"></div>
                    <div class="value">{{ item.note }}</div>
                  </div>
                  <!--
                    <div class="visited-percentages">
                      <div class="caption">New visits, %</div>
                      <div class="delta value" [class.up]="item.deltaUp" [class.down]="!item.deltaUp">
                        <nb-icon [icon]="item.deltaUp ? 'arrow-up' : 'arrow-down'" pack="eva"></nb-icon>
                        {{ item.newVisits }}%
                      </div>
                    </div>
              -->
                </nb-list-item>
              </nb-list>
            </nb-tab>
            <!-- **************** End Sick Notes Tab ****************-->

            <!-- **************** Holidays Tab ****************-->
            <nb-tab tabTitle="Holidays" active="{{actifTab == 'holidaysView'}}">
              <div class="col-12">
                <button type="button" class="btn btn-outline-primary btn-block"
                  (click)="switchViewsTo('holidayForm')">Add Holiday</button>
              </div>
              <nb-list class="user-activity-list">
                <nb-list-item *ngFor="let item of filterTimeSheets('h')">

                  <div class="visited-date">
                    <div class="caption">Start</div>
                    {{ item.from_time | date:'medium' }}
                  </div>

                  <div class="visited-date">
                    <div class="caption">End</div>
                    {{ item.to_time  | date:'medium' }}
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption">Nb Hours</div>
                    <div class="value">{{ item.manual_time  }}</div>
                  </div>

                  <div class="visited-pages-count">
                    <div class="caption"></div>
                    <div class="value">{{ item.note }}</div>
                  </div>
                  <!--
                    <div class="visited-percentages">
                      <div class="caption">New visits, %</div>
                      <div class="delta value" [class.up]="item.deltaUp" [class.down]="!item.deltaUp">
                        <nb-icon [icon]="item.deltaUp ? 'arrow-up' : 'arrow-down'" pack="eva"></nb-icon>
                        {{ item.newVisits }}%
                      </div>
                    </div>
              -->
                </nb-list-item>
              </nb-list>
            </nb-tab>
            <!-- **************** End Holidays Tab ****************-->
          </nb-tabset>
        </nb-card>
      </div>
    </div>
  </nb-card-body>


  <!-- ************************ TIME STAMP FORM ************************-->

  <nb-card-body *ngIf="actifTab == 'timeStampForm'">
    <!-- timesheet list -->
 
    <form [formGroup]="timeStampForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group  col-12">
          <input type="hidden" formControlName="type" [ngModel]="'timestamp'">
        </div>
        <div class="form-group  col-4">
          <label for="inputfrom">From</label>
          <input nbInput matInput formControlName="from_date" placeholder="From" [nbDatepicker]="formpicker">
          <nb-datepicker #formpicker></nb-datepicker>
        </div>
        <div class="form-group  col-2">
          <input matInput name="from_time" type="time" pattern="[0-9]{2}:[0-9]{2}:[0-9]{2}" formControlName="from_time"
            class="form-control" id="from-time" name="from-time" />
        </div>
        <div class="form-group  col-4">
          <label for="inputto">To</label>
          <input nbInput matInput name="to_date" formControlName="to_date" placeholder="To" [nbDatepicker]="topicker">
          <nb-datepicker #topicker></nb-datepicker>
        </div>
        <div class="form-group  col-2">
          <input matInput name="to_time" type="time" formControlName="to_time" class="form-control" id="to-time"
            name="from-time" />
        </div>
        <div class="form-group col-12">
          <label for="exampleFormControlTextarea1">Note</label>
          <textarea matInput name="note" formControlName="note" class="form-control" id="exampleFormControlTextarea1"
            rows="3"></textarea>
        </div>
        <div class="form-group col-12 text-right">
          <button id="submitbutton" name="submitbutton" class="btn btn-primary col-3">
            Add
          </button>
          <button id="cancelbutton" name="cancelbutton" class="btn btn-danger col-3" type="submit"
            (click)="switchViewsTo('timeSheetsView')">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </nb-card-body>

  <!-- ************************ SICK NOTE FORM ************************-->
  <nb-card-body *ngIf="actifTab == 'sickNoteForm'">
    <form [formGroup]="timeStampForm" (ngSubmit)="onSubmit(timeStampForm.value)">
      <div class="form-group  col-12">
        <input type="hidden" formControlName="type" [ngModel]="'sicknote'">
      </div>
      <div class="form-row">
        <div class="form-group  col-6">
          <label for="inputfrom">From</label>
          <input nbInput matInput formControlName="from_date" placeholder="From" [nbDatepicker]="formpicker">
          <nb-datepicker #formpicker></nb-datepicker>
        </div>
        <div class="form-group  col-6">
          <label for="inputto">To</label>
          <input nbInput matInput name="to_date" formControlName="to_date" placeholder="To" [nbDatepicker]="topicker">
          <nb-datepicker #topicker></nb-datepicker>
        </div>
        <div class="form-group col-12">
          <label for="exampleFormControlTextarea1">Note</label>
          <textarea matInput name="note" formControlName="note" class="form-control" id="exampleFormControlTextarea1"
            rows="3"></textarea>
        </div>
        <div class="form-group col-12 text-right">
          <button id="submitbutton" name="submitbutton" class="btn btn-primary col-3">
            Add
          </button>
          <button id="cancelbutton" name="cancelbutton" class="btn btn-danger col-3" type="button"
            (click)="switchViewsTo('timeSheetsView')">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </nb-card-body>

  <!-- ************************ HOLIDAY FORM ************************-->
  <nb-card-body *ngIf="actifTab == 'holidayForm'">
    <form [formGroup]="timeStampForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group  col-12">
          <input type="hidden" formControlName="type" [ngModel]="'holiday'">
        </div>
        <div class="form-group  col-6">
          <label for="inputfrom">From</label>
          <input nbInput matInput formControlName="from_date" placeholder="From" [nbDatepicker]="formpicker">
          <nb-datepicker #formpicker></nb-datepicker>
        </div>
        <div class="form-group  col-6">
          <label for="inputto">To</label>
          <input nbInput matInput name="to_date" formControlName="to_date" placeholder="To" [nbDatepicker]="topicker">
          <nb-datepicker #topicker></nb-datepicker>
        </div>
        <div class="form-group col-12">
          <label for="exampleFormControlTextarea1">Note</label>
          <textarea matInput name="note" formControlName="note" class="form-control" id="exampleFormControlTextarea1"
            rows="3"></textarea>
        </div>
        <div class="form-group col-12 text-right">
          <button id="submitbutton" name="submitbutton" class="btn btn-primary col-3">
            Add
          </button>
          <button id="cancelbutton" name="cancelbutton" class="btn btn-danger col-3" type="button"
            (click)="switchViewsTo('timeSheetsView')">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </nb-card-body>


</nb-card>